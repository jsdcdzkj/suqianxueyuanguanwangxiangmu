import s from"axios";export class CancelTokenManager{instance;cancelTokenQueue=[];constructor(n){this.instance=n,this.instance.addRequestInterceptor(e=>{if(!e.cancelToken){const t=s.CancelToken.source();this.cancelTokenQueue.push({id:e.url,source:t}),e.cancelToken=t.token}return e}),this.instance.addResponseInterceptor(e=>{const t=this.cancelTokenQueue.findIndex(c=>c.id==e.config.url);return t>-1&&this.cancelTokenQueue.splice(t,1),e})}cancelRequest(){for(let n=this.cancelTokenQueue.length-1;n>=0;n--)this.cancelTokenQueue[n].source.cancel("cancel request");this.cancelTokenQueue=[]}}
