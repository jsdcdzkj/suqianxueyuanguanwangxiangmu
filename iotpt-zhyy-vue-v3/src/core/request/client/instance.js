import a from"axios";import{defu as o}from"defu";import{HEADERS as i,TIME_OUT as d,METHOD as r}from"./common";import{InterceptorManager as l}from"./interceptors";import{CancelTokenManager as u}from"./cancel-token";import{DownloaderManger as p}from"./downloader";import{UploaderManager as c}from"./uploader";class g{options=null;instance=null;addRequestInterceptor;addResponseInterceptor;download;downloadFile;upload;refreshTokenQueue=[];cancelTokenManager;refreshing;constructor(n={}){this.options=o(n,{headers:{...i},timeout:d}),this.instance=a.create(this.options);const e=new l(this.instance);this.addRequestInterceptor=e.addRequestInterceptor.bind(e),this.addResponseInterceptor=e.addResponseInterceptor.bind(e),this.options.enableCancelTokenManger&&(this.cancelTokenManager=new u(this));const t=new p(this);this.download=t.download.bind(t),this.downloadFile=t.downloadFile.bind(t);const s=new c(this);this.upload=s.upload.bind(t)}get(n,e={}){return this.request(o({url:n,method:r.GET},e))}post(n,e,t={}){return this.request(o({url:n,data:e,method:r.POST},t))}delete(n,e,t={}){return this.request(o({url:n,data:e,method:r.DELETE},t))}put(n,e,t={}){return this.request(o({url:n,data:e,method:r.PUT},t))}async request(n){try{return await this.instance?.request({...n})}catch(e){return Promise.reject(e)}}}export{g as RequestClient};
